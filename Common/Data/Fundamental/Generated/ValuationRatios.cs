/*
 * QUANTCONNECT.COM - Democratizing Finance, Empowering Individuals.
 * Lean Algorithmic Trading Engine v2.0. Copyright 2014 QuantConnect Corporation.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); 
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

//------------------------------------------------------------------------------
// This code was generated by a tool.
// Changes to this file may cause incorrect behavior and will be lost if
// the code is regenerated.
//------------------------------------------------------------------------------

using System;
using System.IO;
using Newtonsoft.Json;

namespace QuantConnect.Data.Fundamental
{
	/// <summary>
	/// Definition of the ValuationRatios class
	/// </summary>
	public class ValuationRatios : BaseData
	{
		/// <summary>
		/// Dividend per share / Diluted earning per share
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14000
		/// </remarks>
		public decimal PayoutRatio { get; set; }

		/// <summary>
		/// ROE * (1 – Payout Ratio)
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14001
		/// </remarks>
		public decimal SustainableGrowthRate { get; set; }

		/// <summary>
		/// Refers to the ratio of free cash flow to enterprise value. Morningstar calculates the ratio by using the underlying data reported in
		/// the company filings or reports:   FCF /Enterprise Value.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14002
		/// </remarks>
		public decimal CashReturn { get; set; }

		/// <summary>
		/// Sales / Average Diluted Shares Outstanding
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14003
		/// </remarks>
		public decimal SalesPerShare { get; set; }

		/// <summary>
		/// Common Shareholder’s Equity / Diluted Shares Outstanding
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14004
		/// </remarks>
		public decimal BookValuePerShare { get; set; }

		/// <summary>
		/// Cash Flow from Operations / Average Diluted Shares Outstanding
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14005
		/// </remarks>
		public decimal CFOPerShare { get; set; }

		/// <summary>
		/// Free Cash Flow / Average Diluted Shares Outstanding
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14006
		/// </remarks>
		public decimal FCFPerShare { get; set; }

		/// <summary>
		/// Diluted EPS / Price
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14007
		/// </remarks>
		public decimal EarningYield { get; set; }

		/// <summary>
		/// Adjusted Close Price/ EPS. If the result is negative, zero, &gt;10,000 or &lt;0.001, then null.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14008
		/// </remarks>
		public decimal PERatio { get; set; }

		/// <summary>
		/// SalesPerShare / Price
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14009
		/// </remarks>
		public decimal SalesYield { get; set; }

		/// <summary>
		/// Adjusted close price / Sales Per Share. If the result is negative or zero, then null.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14010
		/// </remarks>
		public decimal PSRatio { get; set; }

		/// <summary>
		/// BookValuePerShare / Price
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14011
		/// </remarks>
		public decimal BookValueYield { get; set; }

		/// <summary>
		/// Adjusted close price / Book Value Per Share. If the result is negative or zero, then null.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14012
		/// </remarks>
		public decimal PBRatio { get; set; }

		/// <summary>
		/// CFOPerShare / Price
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14013
		/// </remarks>
		public decimal CFYield { get; set; }

		/// <summary>
		/// Adjusted close price /Cash Flow Per Share. If the result is negative or zero, then null.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14014
		/// </remarks>
		public decimal PCFRatio { get; set; }

		/// <summary>
		/// FCFPerShare / Price
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14015
		/// </remarks>
		public decimal FCFYield { get; set; }

		/// <summary>
		/// Adjusted close price/ Free Cash Flow Per Share. If the result is negative or zero, then null.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14016
		/// </remarks>
		public decimal FCFRatio { get; set; }

		/// <summary>
		/// Dividends Per Share over the trailing 12 months / Price
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14017
		/// </remarks>
		public decimal TrailingDividendYield { get; set; }

		/// <summary>
		/// (Current Dividend Per Share * Payout Frequency) / Price
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14018
		/// </remarks>
		public decimal ForwardDividendYield { get; set; }

		/// <summary>
		/// Estimated Earnings Per Share / Price
		/// Note:
		/// a) The “Next” Year’s EPS Estimate is used; For instance, if today’s actual date is March 1, 2009, the “Current” EPS Estimate for
		/// MSFT is June 2009, and the “Next” EPS Estimate for MSFT is June 2010; the latter is used.
		/// b) The eps estimated data is sourced from a third party.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14019
		/// </remarks>
		public decimal ForwardEarningYield { get; set; }

		/// <summary>
		/// 1 / ForwardEarningYield
		/// If result is negative, then null
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14020
		/// </remarks>
		public decimal ForwardPERatio { get; set; }

		/// <summary>
		/// ForwardPERatio / Long-term Average Earning Growth Rate
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14021
		/// </remarks>
		public decimal PEGRatio { get; set; }

		/// <summary>
		/// The number of years it would take for a company's cumulative earnings to equal the stock's current trading price, assuming that the
		/// company continues to increase its annual earnings at the growth rate used to calculate the PEG ratio.
		/// [ Log (PG/E + 1)  / Log (1 + G) ] - 1
		/// Where
		/// P=Price
		/// E=Next Fiscal Year’s Estimated EPS
		/// G=Long-term Average Earning Growth
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14022
		/// </remarks>
		public decimal PEGPayback { get; set; }

		/// <summary>
		/// The company’s total book value less the value of any intangible assets dividend by number of shares.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14023
		/// </remarks>
		public decimal TangibleBookValuePerShare { get; set; }

		/// <summary>
		/// The three year average for tangible book value per share.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14024
		/// </remarks>
		public decimal TangibleBVPerShare3YrAvg { get; set; }

		/// <summary>
		/// The five year average for tangible book value per share.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14025
		/// </remarks>
		public decimal TangibleBVPerShare5YrAvg { get; set; }

		/// <summary>
		/// Latest Dividend * Frequency
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14026
		/// </remarks>
		public decimal ForwardDividend { get; set; }

		/// <summary>
		/// (Current Assets – Current Liabilities)/number of shares
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14027
		/// </remarks>
		public decimal WorkingCapitalPerShare { get; set; }

		/// <summary>
		/// The three year average for working capital per share.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14028
		/// </remarks>
		public decimal WorkingCapitalPerShare3YrAvg { get; set; }

		/// <summary>
		/// The five year average for working capital per share.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14029
		/// </remarks>
		public decimal WorkingCapitalPerShare5YrAvg { get; set; }

		/// <summary>
		/// This reflects the fair market value of a company, and allows comparability to other companies as this is capital structure-neutral.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14030
		/// </remarks>
		public decimal EVToEBITDA { get; set; }

		/// <summary>
		/// The net repurchase of shares outstanding over the market capital of the company. It is a measure of shareholder return.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14031
		/// </remarks>
		public decimal BuyBackYield { get; set; }

		/// <summary>
		/// The total yield that shareholders can expect, by summing Dividend Yield and Buyback Yield.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14032
		/// </remarks>
		public decimal TotalYield { get; set; }

		/// <summary>
		/// The five-year average of the company’s price-to-earnings ratio.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14033
		/// </remarks>
		public decimal RatioPE5YearAverage { get; set; }

		/// <summary>
		/// Price change this month, expressed as latest price/last month end price.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14034
		/// </remarks>
		public decimal PriceChange1M { get; set; }

		/// <summary>
		/// Adjusted Close Price/ Normalized EPS. Normalized EPS removes onetime and unusual items from net EPS, to provide investors with
		/// a more accurate measure of the company’s true earnings. If the result is negative, zero, &gt;10,000 or &lt;0.001, then null.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14035
		/// </remarks>
		public decimal NormalizedPERatio { get; set; }

		/// <summary>
		/// Adjusted close price/EBITDA Per Share. If the result is negative or zero, then null.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14036
		/// </remarks>
		public decimal PricetoEBITDA { get; set; }

		/// <summary>
		/// Average of the last 60 monthly observations of trailing dividend yield in the last 5 years.
		/// </summary>
		/// <remarks>
		/// Morningstar DataId: 14037
		/// </remarks>
		public decimal DivYield5Year { get; set; }

		/// <summary>
		/// Creates an instance of the ValuationRatios class
		/// </summary>
		public ValuationRatios()
		{
		}

		/// <summary>
		/// Sets values for non existing periods from a previous instance
		/// </summary>
		/// <remarks>Used to fill-forward values from previous dates</remarks>
		/// <param name="previous">The previous instance</param>
		public void UpdateValues(ValuationRatios previous)
		{
		}

		/// <summary>
		/// Return the URL string source of the file. This will be converted to a stream 
		/// </summary>
		public override SubscriptionDataSource GetSource(SubscriptionDataConfig config, DateTime date, bool isLiveMode)
		{
			var source =
				Path.Combine(Globals.DataFolder, "equity", config.Market, "fundamental", "fine", date.ToString("yyyyMMdd") + ".zip") +
				"#" + config.Symbol.Value + "_valuation-ratios.json";

			return new SubscriptionDataSource(source, SubscriptionTransportMedium.LocalFile, FileFormat.Csv);
		}

		/// <summary>
		/// Reader converts each line of the data source into BaseData objects. Each data type creates its own factory method, and returns a new instance of the object
		/// each time it is called. The returned object is assumed to be time stamped in the config.ExchangeTimeZone.
		/// </summary>
		public override BaseData Reader(SubscriptionDataConfig config, string line, DateTime date, bool isLiveMode)
		{
			return JsonConvert.DeserializeObject<ValuationRatios>(line);
		}
	}
}
